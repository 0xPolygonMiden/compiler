
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../../design/frontends/">
      
      
        <link rel="next" href="../calling-conventions/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.33">
    
    
      
        <title>Known limitations - Miden Compiler Docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.3cba04c6.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.7/katex.min.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#known-limitations" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Miden Compiler Docs" class="md-header__button md-logo" aria-label="Miden Compiler Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Miden Compiler Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Known limitations
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Miden Compiler Docs" class="md-nav__button md-logo" aria-label="Miden Compiler Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Miden Compiler Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting started
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Usage
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Usage
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/midenc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    midenc
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/cargo-miden/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    cargo miden
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Guides
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Guides
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/rust_to_wasm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Rust To WebAssembly
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/wasm_to_masm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    WebAssembly To Miden Assembly
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/develop_miden_in_rust/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Developing Miden programs In Rust
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/develop_miden_rollup_accounts_and_note_scripts_in_rust/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Developing Miden rollup accounts and note scripts In Rust
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/debugger/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Debugging programs
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Compiler architecture
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Compiler architecture
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../design/overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../design/frontends/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Supported front ends
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Appendices
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Appendices
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Known limitations
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Known limitations
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#rust-language-support" class="md-nav__link">
    <span class="md-ellipsis">
      Rust language support
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Rust language support">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#floating-point-types" class="md-nav__link">
    <span class="md-ellipsis">
      Floating point types
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-call-indirection" class="md-nav__link">
    <span class="md-ellipsis">
      Function call indirection
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Function call indirection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#iterator-lowered-to-loop" class="md-nav__link">
    <span class="md-ellipsis">
      Iterator lowered to loop
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#monomorphization-inlining" class="md-nav__link">
    <span class="md-ellipsis">
      Monomorphization + inlining
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inlined-trait-impl" class="md-nav__link">
    <span class="md-ellipsis">
      Inlined trait impl
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#miden-sdk" class="md-nav__link">
    <span class="md-ellipsis">
      Miden SDK
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rustmiden-ffi-foreign-function-interface-and-interop" class="md-nav__link">
    <span class="md-ellipsis">
      Rust/Miden FFI (foreign function interface) and interop
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#core-miden-functionality" class="md-nav__link">
    <span class="md-ellipsis">
      Core Miden functionality
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Core Miden functionality">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dynamic-procedure-invocation" class="md-nav__link">
    <span class="md-ellipsis">
      Dynamic procedure invocation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cross-context-procedure-invocation" class="md-nav__link">
    <span class="md-ellipsis">
      Cross-context procedure invocation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#packaging" class="md-nav__link">
    <span class="md-ellipsis">
      Packaging
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Packaging">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#package-format" class="md-nav__link">
    <span class="md-ellipsis">
      Package format
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../calling-conventions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Calling conventions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../canonabi-adhocabi-mismatch/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Canonical ABI vs Miden ABI
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#rust-language-support" class="md-nav__link">
    <span class="md-ellipsis">
      Rust language support
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Rust language support">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#floating-point-types" class="md-nav__link">
    <span class="md-ellipsis">
      Floating point types
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-call-indirection" class="md-nav__link">
    <span class="md-ellipsis">
      Function call indirection
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Function call indirection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#iterator-lowered-to-loop" class="md-nav__link">
    <span class="md-ellipsis">
      Iterator lowered to loop
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#monomorphization-inlining" class="md-nav__link">
    <span class="md-ellipsis">
      Monomorphization + inlining
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inlined-trait-impl" class="md-nav__link">
    <span class="md-ellipsis">
      Inlined trait impl
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#miden-sdk" class="md-nav__link">
    <span class="md-ellipsis">
      Miden SDK
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rustmiden-ffi-foreign-function-interface-and-interop" class="md-nav__link">
    <span class="md-ellipsis">
      Rust/Miden FFI (foreign function interface) and interop
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#core-miden-functionality" class="md-nav__link">
    <span class="md-ellipsis">
      Core Miden functionality
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Core Miden functionality">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dynamic-procedure-invocation" class="md-nav__link">
    <span class="md-ellipsis">
      Dynamic procedure invocation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cross-context-procedure-invocation" class="md-nav__link">
    <span class="md-ellipsis">
      Cross-context procedure invocation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#packaging" class="md-nav__link">
    <span class="md-ellipsis">
      Packaging
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Packaging">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#package-format" class="md-nav__link">
    <span class="md-ellipsis">
      Package format
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="known-limitations">Known limitations<a class="headerlink" href="#known-limitations" title="Link to this section">&para;</a></h1>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>See the <a href="https://github.com/0xpolygonmiden/compiler/issues">issue tracker</a> for information
on known bugs. This document focuses on missing/incomplete features, rather than bugs.</p>
</div>
<p>The compiler is still in its early stages of development, so there are various features that are
unimplemented, or only partially implemented, and the test suite is still limited in scope, so
we are still finding bugs on a regular basis. We are rapidly improving this situation, but it is
important to be aware of this when using the compiler.</p>
<p>The features discussed below are broken up into sections, to make them easier to navigate and
reference.</p>
<h2 id="rust-language-support">Rust language support<a class="headerlink" href="#rust-language-support" title="Link to this section">&para;</a></h2>
<h3 id="floating-point-types">Floating point types<a class="headerlink" href="#floating-point-types" title="Link to this section">&para;</a></h3>
<ul>
<li>Status: <strong>Unsupported</strong></li>
<li>Tracking Issue: N/A</li>
<li>Release Milestone: N/A</li>
</ul>
<p>In order to represent <code>Felt</code> &ldquo;natively&rdquo; in Rust, we were forced to piggy-back on the <code>f32</code> type,
which is propagated through to WebAssembly, and allows us to handle those values specially.</p>
<p>As a result, floating-point types in Rust are not supported at all. Any attempt to use them will
result in a compilation error. We considered this a fair design tradeoff, as floating point math
is unused/rare in the context in which Miden is used, in comparison to fixed-point or field
arithmetic. In addition, implementing floating-point operations in software on the Miden VM would
be extraordinarily expensive, which generally works against the purpose for using floats in the
first place.</p>
<p>At this point in time, we have no plans to support floats, but this may change if we are able to
find a better/more natural representation for <code>Felt</code> in WebAssembly.</p>
<h3 id="function-call-indirection">Function call indirection<a class="headerlink" href="#function-call-indirection" title="Link to this section">&para;</a></h3>
<ul>
<li>Status: <strong>Unimplemented</strong></li>
<li>Tracking Issue: <a href="https://github.com/0xPolygonMiden/compiler/issues/32">#32</a></li>
<li>Release Milestone: <a href="https://github.com/0xPolygonMiden/compiler/milestone/4">Beta 1</a></li>
</ul>
<p>This feature corresponds to <code>call_indirect</code> in WebAssembly, and is associated with Rust features
such as trait objects (which use indirection to call trait methods), and closures. Note that the
Rust compiler is able to erase the indirection associated with certain abstractions statically
in some cases, shown below. If Rust is unable to statically resolve all call targets, then <code>midenc</code>
will raise an error when it encounters any use of <code>call_indirect</code>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The following examples rely on <code>rustc</code>/LLVM inlining enough code to be able to convert indirect
calls to direct calls. This may require you to enable link-time optimization with <code>lto = "fat"</code>
and compile all of the code in the crate together with <code>codegen-units = 1</code>, in order to maximize
the amount of inlining that can occur. Even then, it may not be possible to remove some forms of
indirection, in which case you will need to find another workaround.</p>
</div>
<h4 id="iterator-lowered-to-loop">Iterator lowered to loop<a class="headerlink" href="#iterator-lowered-to-loop" title="Link to this section">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="k">pub</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">is_zeroed</span><span class="p">(</span><span class="n">bytes</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="p">[</span><span class="kt">u8</span><span class="p">;</span><span class="w"> </span><span class="mi">32</span><span class="p">])</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Rust is able to convert this to a loop, erasing the closure completely</span>
<span class="w">    </span><span class="n">bytes</span><span class="p">.</span><span class="n">iter</span><span class="p">().</span><span class="n">copied</span><span class="p">().</span><span class="n">all</span><span class="p">(</span><span class="o">|</span><span class="n">b</span><span class="o">|</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="monomorphization-inlining">Monomorphization + inlining<a class="headerlink" href="#monomorphization-inlining" title="Link to this section">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="k">pub</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">call</span><span class="o">&lt;</span><span class="n">F</span><span class="p">,</span><span class="w"> </span><span class="n">T</span><span class="o">&gt;</span><span class="p">(</span><span class="n">fun</span><span class="p">:</span><span class="w"> </span><span class="nc">F</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">T</span>
<span class="k">where</span>
<span class="w">    </span><span class="n">F</span><span class="p">:</span><span class="w"> </span><span class="nb">Fn</span><span class="p">()</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">T</span><span class="p">,</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">fun</span><span class="p">()</span>
<span class="p">}</span>

<span class="cp">#[inline(never)]</span>
<span class="k">pub</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">foo</span><span class="p">()</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">}</span>

<span class="k">fn</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Rust is able to inline the body of `call` after monomorphization, which results in</span>
<span class="w">    </span><span class="c1">// the call to `foo` being resolved statically.</span>
<span class="w">    </span><span class="n">call</span><span class="p">(</span><span class="n">foo</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="inlined-trait-impl">Inlined trait impl<a class="headerlink" href="#inlined-trait-impl" title="Link to this section">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="k">pub</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="n">Foo</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">fn</span><span class="w"> </span><span class="nf">is_foo</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="kt">bool</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">impl</span><span class="w"> </span><span class="n">Foo</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="kt">u32</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="cp">#[inline(never)]</span>
<span class="w">    </span><span class="k">fn</span><span class="w"> </span><span class="nf">is_foo</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">}</span>
<span class="p">}</span>

<span class="k">fn</span><span class="w"> </span><span class="nf">has_foo</span><span class="p">(</span><span class="n">items</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="p">[</span><span class="k">dyn</span><span class="w"> </span><span class="n">Foo</span><span class="p">])</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">items</span><span class="p">.</span><span class="n">iter</span><span class="p">().</span><span class="n">any</span><span class="p">(</span><span class="o">|</span><span class="n">item</span><span class="o">|</span><span class="w"> </span><span class="n">item</span><span class="p">.</span><span class="n">is_foo</span><span class="p">())</span>
<span class="p">}</span>

<span class="k">fn</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="kt">u32</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Rust inlines `has_foo`, converts the iterator chain to a loop, and is able to realize</span>
<span class="w">    </span><span class="c1">// that the `dyn Foo` items are actually `u32`, and resolves the call to `is_foo` to</span>
<span class="w">    </span><span class="c1">// `&lt;u32 as Foo&gt;::is_foo`.</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">foo</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="nc">dyn</span><span class="w"> </span><span class="n">Foo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="kt">u32</span><span class="p">::</span><span class="n">MAX</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="o">&amp;</span><span class="k">dyn</span><span class="w"> </span><span class="n">Foo</span><span class="p">;</span>
<span class="w">    </span><span class="n">has_foo</span><span class="p">(</span><span class="o">&amp;</span><span class="p">[</span><span class="n">foo</span><span class="p">])</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="kt">u32</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="miden-sdk">Miden SDK<a class="headerlink" href="#miden-sdk" title="Link to this section">&para;</a></h3>
<ul>
<li>Status: <strong>Incomplete</strong></li>
<li>Tracking Issue: <a href="https://github.com/0xPolygonMiden/compiler/issues/159">#159</a> and <a href="https://github.com/0xPolygonMiden/compiler/issues/158">#158</a></li>
<li>Release Milestone: <a href="https://github.com/0xPolygonMiden/compiler/milestone/4">Beta 1</a></li>
</ul>
<p>The Miden SDK for Rust, is a Rust crate that provides the implementation of native Miden types, as
well as bindings to the Miden standard library and transaction kernel APIs.</p>
<p>Currently, only a very limited subset of the API surface has had bindings implemented. This means
that there is a fair amount of native Miden functionality that is not yet available from Rust. We
will be expanding the SDK rapidly over the next few weeks and months, but for the time being, if
you encounter a missing API that you need, let us know, so we can ensure it is prioritized above
APIs which are lesser used.</p>
<h3 id="rustmiden-ffi-foreign-function-interface-and-interop">Rust/Miden FFI (foreign function interface) and interop<a class="headerlink" href="#rustmiden-ffi-foreign-function-interface-and-interop" title="Link to this section">&para;</a></h3>
<ul>
<li>Status: <strong>Internal Use Only</strong></li>
<li>Tracking Issue: <a href="https://github.com/0xPolygonMiden/compiler/issues/304">#304</a></li>
<li>Release Milestone: TBD</li>
</ul>
<p>While the compiler has functionality to link against native Miden Assembly libraries, binding
against procedures exported from those libraries from Rust can require glue code to be emitted
by the compiler in some cases, and the set of procedures for which this is done is currently
restricted to a hardcoded whitelist of known Miden procedures.</p>
<p>This affects any procedure which returns a type larger than <code>u32</code> (excluding <code>Felt</code>, which for
this purpose has the same size). For example, returing a Miden <code>Word</code> from a procedure, a common
return type, is not compatible with Rust&rsquo;s ABI - it will attempt to generate code which allocates
stack space in the caller, which it expects the callee to write to, inserting a new parameter at
the start of the parameter list, and expecting nothing to be returned by value. The compiler handles
situations like these using a set of ABI &ldquo;transformation strategies&rdquo;, which lift/lower differences
between the Rust and Miden ABIs at call boundaries.</p>
<p>To expose the FFI machinery for use with any Miden procedure, we need type signatures for those
procedures at a minimum, and in some cases we may require details of the calling convention/ABI.
This metadata does not currently exist, but is on the roadmap for inclusion into Miden Assembly
and Miden packaging. Once present, we can open up the FFI for general use.</p>
<h2 id="core-miden-functionality">Core Miden functionality<a class="headerlink" href="#core-miden-functionality" title="Link to this section">&para;</a></h2>
<h3 id="dynamic-procedure-invocation">Dynamic procedure invocation<a class="headerlink" href="#dynamic-procedure-invocation" title="Link to this section">&para;</a></h3>
<ul>
<li>Status: <strong>Unimplemented</strong></li>
<li>Tracking Issue: <a href="https://github.com/0xPolygonMiden/compiler/issues/32">#32</a></li>
<li>Release Milestone: <a href="https://github.com/0xPolygonMiden/compiler/milestone/4">Beta 1</a></li>
</ul>
<p>This is a dependency of <a href="#function-call-indirection">Function Call Indirection</a> described above,
and is the mechanism by which we can perform indirect calls in Miden. In order to implement support
for indirect calls in the Wasm frontend, we need underlying support for <code>dynexec</code>, which is not yet
implemented.</p>
<p>This feature adds support for lowering indirect calls to <code>dynexec</code> or <code>dyncall</code> instructions,
depending on the ABI of the callee. <code>dyncall</code> has an additional dependency on support for
<a href="#cross-context-procedure-invocation">Cross-Context Procedure Invocation</a>.</p>
<p>A known issue with this feature is that <code>dyn(exec|call)</code> consumes a word on the operand stack
for the hash of the callee being invoked, but this word <em>remains</em> on the stack when entering the
callee, which has the effect of requiring procedures to have a different ABI depending on whether
they expect to be dynamically-invoked or not.</p>
<p>Our solution to that issue is to generate stubs which are used as the target of <code>dyn(exec|call)</code>,
the body of which drop the callee hash, fix up the operand stack as necessary, and then uses a
simple <code>exec</code> or <code>call</code> to invoke the &ldquo;real&rdquo; callee. We will emit a single stub for every function
which has its &ldquo;address&rdquo; taken, and use the hash of the stub in place of the actual callee hash.</p>
<h3 id="cross-context-procedure-invocation">Cross-context procedure invocation<a class="headerlink" href="#cross-context-procedure-invocation" title="Link to this section">&para;</a></h3>
<ul>
<li>Status: <strong>Unimplemented</strong></li>
<li>Tracking Issue: <a href="https://github.com/0xPolygonMiden/compiler/issues/303">#303</a></li>
<li>Release Milestone: <a href="https://github.com/0xPolygonMiden/compiler/milestone/5">Beta 2</a></li>
</ul>
<p>This is required in order to support representing Miden accounts and note scripts in Rust, and
compilation to Miden Assembly.</p>
<p>Currently, you can write code in Rust that is very close to how accounts and note scripts will
look like in the language, but it is not possible to actually implement either of those in Rust
today. The reasons for this are covered in depth in the tracking issue linked above, but to
briefly summarize, the primary issue has to do with the fact that Rust programs are compiled
for a &ldquo;shared-everything&rdquo; environment, i.e. you can pass references to memory from caller to
callee, write to caller memory from the callee, etc. In Miden however, contexts are &ldquo;shared-nothing&rdquo;
units of isolation, and thus cross-context operations, such as performing a <code>call</code> from a note script
to a method on an account, are not compatible with the usual calling conventions used by Rust and
LLVM.</p>
<p>The solution to this relies on compiling the Rust code for the <code>wasm32-wasip2</code> target, which emits
a new kind of WebAssembly module, known as a <em>component</em>. These components adhere to the rules of
the <a href="https://component-model.bytecodealliance.org/">WebAssembly Component Model</a>. Of primary
interest to us, is the fact that components in this model are &ldquo;shared-nothing&rdquo;, and the ABI used to
communicate across component boundaries, is specially designed to enforce shared-nothing  semantics
on caller and callee. In addition to compiling for a specific Wasm target, we also rely on some
additional tooling for describing component interfaces, types, and to generate Rust bindings for
those descriptions, to ensure that calls across the boundary remain opaque, even to the linker,
which ensures that the assumptions of the caller and callee with regard to what address space they
operate in are preserved (i.e. a callee can never be inlined into the caller, and thus end up
executing in the caller&rsquo;s context rather than the expected callee context).</p>
<p>This is one of our top priorities, as it is critical to being able to use Rust to compile code for
the Miden rollup, but it is also the most complex feature on our roadmap, hence why it is scheduled
for our Beta 2 milestone, rather than Beta 1 (the next release), as it depends on multiple other
subfeatures being implemented first.</p>
<h2 id="packaging">Packaging<a class="headerlink" href="#packaging" title="Link to this section">&para;</a></h2>
<h3 id="package-format">Package format<a class="headerlink" href="#package-format" title="Link to this section">&para;</a></h3>
<ul>
<li>Status: <strong>Experimental</strong></li>
<li>Tracking Issue: <a href="https://github.com/0xPolygonMiden/compiler/issues/121">#121</a></li>
<li>Release Milestone: <a href="https://github.com/0xPolygonMiden/compiler/milestone/4">Beta 1</a></li>
</ul>
<p>This feature represents the ability to compile and distribute a single artifact that contains
the compiled MAST, and all required and optional metadata to make linking against, and executing
packages as convenient as a dynamic library or executable.</p>
<p>The compiler currently produces, by default, an experimental implementation of a package format
that meets the minimum requirements to support libraries and programs compiled from Rust:</p>
<ul>
<li>Name and semantic version information</li>
<li>Content digest</li>
<li>The compiled MAST and metadata about the procedures exported from it</li>
<li>Read-only data segments and their hashes (if needed by the program, used to load data into the
advice provider when a program is loaded, and to write those segments into linear memory when the
program starts)</li>
<li>Dependency information (optional, specifies what libraries were linked against during compilation)</li>
<li>Debug information (optional)</li>
</ul>
<p>However, this package format is not yet understood by the Miden VM itself. This means you cannot,
currently, compile a package and then run it using <code>miden run</code> directly. Instead, you can use
<code>midenc run</code> to load and run code from a package, as the compiler ships with the VM embedded for
use with the interactive debugger, and provides native support for packaging on top of it. You can
also use <code>midenc debug</code> to execute your program interactively in the debugger, depending on your
needs. See <a href="../../usage/debugger/">Debugging Programs</a> for more information on how to use the
debugger, and <code>midenc help run</code> for more information on executing programs with the <code>midenc run</code>
command.</p>
<p>While it is possible to emit raw MAST from <code>midenc</code>, rather than the experimental package format,
the resulting artifact cannot be run without some fragile and error-prone manual setup, in order
to ensure that the advice provider is correctly initialized with any read-only data segments. For
now, it is recommended that you use the <code>midenc</code> tooling for testing programs, until the format
is stabilized.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../../design/frontends/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Supported front ends">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Supported front ends
              </div>
            </div>
          </a>
        
        
          
          <a href="../calling-conventions/" class="md-footer__link md-footer__link--next" aria-label="Next: Calling conventions">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Calling conventions
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["search.suggest", "search.highlight", "search.share", "navigation.instant.progress", "navigation.tracking", "navigation.integration", "navigation.indexes", "navigation.path", "navigation.top", "navigation.footer", "toc.follow", "content.code.copy", "content.action.edit"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.af256bd8.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?version=4.8.0"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.7/katex.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.7/contrib/auto-render.min.js"></script>
      
        <script src="../../js/open_in_new_tab.js"></script>
      
    
  </body>
</html>